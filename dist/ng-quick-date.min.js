(function(){var e;e=angular.module("ngQuickDate",[]),e.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"fa fa-chevron-right",prevLinkHtml:"fa fa-chevron-left",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],dateFilter:null,showTodayTomorrow:!1,parseDateFunction:function(e){var t;return t=Date.parse(e),isNaN(t)?null:new Date(t)}},$get:function(){return this.options},set:function(e,t){var n,a,i;if("object"==typeof e){i=[];for(n in e)a=e[n],i.push(this.options[n]=a);return i}return this.options[e]=t}}}),e.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$sce",function(e,t,n){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",onChange:"&",required:"@"},replace:!0,link:function(a,i,r,l){var o,u,d,c,s,m,p,g,f,v,h,D,w,y;return p=function(){var e;return h(),a.toggleCalendar(!1),a.weeks=[],a.inputDate=null,a.inputTime=null,a.invalid=!0,a.todayTomorrow={isToday:null},"string"==typeof r.initValue&&l.$setViewValue(r.initValue),a.defaultTime||(e=new Date(2013,0,1,12,0),a.datePlaceholder=t("date")(e,a.dateFormat),a.timePlaceholder=t("date")(e,a.timeFormat)),v(),f()},h=function(){var t,i;for(t in e)i=e[t],t.match(/[Hh]tml/)?a[t]=n.trustAsHtml(e[t]||""):!a[t]&&r[t]?a[t]=r[t]:a[t]||(a[t]=e[t]);return a.labelFormat||(a.labelFormat=a.dateFormat,a.disableTimepicker||(a.labelFormat+=" "+a.timeFormat)),r.iconClass&&r.iconClass.length?a.buttonIconHtml=n.trustAsHtml("<i ng-show='iconClass' class='"+r.iconClass+"'></i>"):void 0},u=!1,window.document.addEventListener("click",function(e){return a.calendarShown&&!u&&(a.toggleCalendar(!1),a.$apply()),u=!1}),angular.element(i[0])[0].addEventListener("click",function(e){return u=!0}),f=function(){var e;return e=l.$modelValue?g(l.$modelValue):null,w(),D(e),a.mainButtonStr=e?t("date")(e,a.labelFormat):a.placeholder,a.invalid=l.$invalid},D=function(e){return null!=e?(a.inputDate=t("date")(e,a.dateFormat),a.inputTime=t("date")(e,a.timeFormat)):(a.inputDate=null,a.inputTime=null)},v=function(e){var t;return null==e&&(e=null),t=null!=e?new Date(e):new Date,"Invalid Date"===t.toString()&&(t=new Date),t.setDate(1),a.calendarDate=new Date(t)},w=function(){var e,t,n,i,r,o,u,c,s,p,g,f,v,h;for(o=a.calendarDate.getDay(),i=m(a.calendarDate.getFullYear(),a.calendarDate.getMonth()),r=Math.ceil((o+i)/7),g=[],e=new Date(a.calendarDate),e.setDate(e.getDate()+-1*o),u=f=0,h=r-1;h>=0?h>=f:f>=h;u=h>=0?++f:--f)for(g.push([]),n=v=0;6>=v;n=++v)t=new Date(e),a.defaultTime&&(s=a.defaultTime.split(":"),t.setHours(s[0]||0),t.setMinutes(s[1]||0),t.setSeconds(s[2]||0)),c=l.$modelValue&&t&&d(t,l.$modelValue),p=d(t,new Date),g[u].push({date:t,selected:c,disabled:"function"==typeof a.dateFilter?!a.dateFilter(t):!1,other:t.getMonth()!==a.calendarDate.getMonth(),today:p}),e.setDate(e.getDate()+1);var D=new Date,w=new Date;return w.setDate(D.getDate()+1),d(D,l.$modelValue)===!0?a.todayTomorrow.isToday=!0:d(w,l.$modelValue)===!0?a.todayTomorrow.isToday=!1:a.todayTomorrow.isToday=null,a.weeks=g},l.$parsers.push(function(e){return a.required&&null==e?(l.$setValidity("required",!1),null):angular.isDate(e)?(l.$setValidity("required",!0),e):angular.isString(e)?(l.$setValidity("required",!0),a.parseDateFunction(e)):null}),l.$formatters.push(function(e){return angular.isDate(e)?e:angular.isString(e)?a.parseDateFunction(e):void 0}),o=function(e,n){return t("date")(e,n)},y=function(e){return"string"==typeof e?g(e):e},g=e.parseDateFunction,d=function(e,t,n){return null==n&&(n=!1),n?e-t===0:(e=y(e),t=y(t),e&&t&&e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())},c=function(e,t){return e&&t?parseInt(e.getTime()/6e4)===parseInt(t.getTime()/6e4):!1},m=function(e,t){return[31,e%4===0&&e%100!==0||e%400===0?29:28,31,30,31,30,31,31,30,31,30,31][t]},s=function(e,t){var n,a,i,r,l,o;return l=n=a=o=r=null,i=function(){var e;return e=+new Date-o,l=t>e&&e>0?setTimeout(i,t-e):null},function(){return a=this,n=arguments,o=+new Date,l||(l=setTimeout(i,t),r=e.apply(a,n),a=n=null),r}},l.$render=function(){return v(l.$viewValue),f()},l.$viewChangeListeners.unshift(function(){return v(l.$viewValue),f(),a.onChange?a.onChange():void 0}),a.$watch("calendarShown",function(e,t){var n;return e?(n=angular.element(i[0].querySelector(".quickdate-date-input"))[0],n.select()):void 0}),a.toggleCalendar=s(function(e){return isFinite(e)?a.calendarShown=e:a.calendarShown=!a.calendarShown},150),a.selectDate=function(e,t){var n;return null==t&&(t=!0),n=!l.$viewValue&&e||l.$viewValue&&!e||e&&l.$viewValue&&e.getTime()!==l.$viewValue.getTime(),"function"!=typeof a.dateFilter||a.dateFilter(e)?(l.$setViewValue(e),t&&a.toggleCalendar(!1),!0):!1},a.selectDateFromInput=function(e){var t,n,i,r;null==e&&(e=!1);try{if(n=g(a.inputDate),!n)throw"Invalid Date";if(!a.disableTimepicker&&a.inputTime&&a.inputTime.length&&n){if(r=a.disableTimepicker?"00:00:00":a.inputTime,i=g(""+a.inputDate+" "+r),!i)throw"Invalid Time";n=i}if(!c(l.$viewValue,n)&&!a.selectDate(n,!1))throw"Invalid Date";return e&&a.toggleCalendar(!1),a.inputDateErr=!1,a.inputTimeErr=!1}catch(o){if(t=o,"Invalid Date"===t)return a.inputDateErr=!0;if("Invalid Time"===t)return a.inputTimeErr=!0}},a.onDateInputTab=function(){return a.disableTimepicker&&a.toggleCalendar(!1),!0},a.onTimeInputTab=function(){return a.toggleCalendar(!1),!0},a.nextMonth=function(){return v(new Date(new Date(a.calendarDate).setMonth(a.calendarDate.getMonth()+1))),f()},a.prevMonth=function(){return v(new Date(new Date(a.calendarDate).setMonth(a.calendarDate.getMonth()-1))),f()},a.clear=function(){return a.selectDate(null,!0)},a.setToday=function(){return a.selectDate(new Date,!0),f()},a.setTomorrow=function(){var e=new Date,t=new Date;return t.setDate(e.getDate()+1),a.selectDate(t,!0),f()},p()},template:"<div class='quickdate'>\n  <a href='' ng-focus='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'> \n<div ng-hide='iconClass' ng-bind-html='buttonIconHtml'></div>{{mainButtonStr}}</a>\n  <div class='quickdate-popup' ng-class='{open: calendarShown}'>\n    <div class='quickdate-content'> \n<div class='quickdate-calendar-header'>\n      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'> \n<div class={{prevLinkHtml}}></div>\n</a>\n      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>\n      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div class={{nextLinkHtml}}></div></a>\n    </div>\n    <table class='quickdate-calendar'>\n      <thead>\n        <tr>\n          <th ng-repeat='day in dayAbbreviations'>{{day}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat='week in weeks'>\n          <td ng-mousedown='selectDate(day.date, true, true)' ng-click='$event.preventDefault()' ng-class='{\"other-month\": day.other, \"disabled-date\": day.disabled, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class='selectTodayWrap' ng-if='showTodayTomorrow'><form><label><input type='radio' ng-model='todayTomorrow.isToday' ng-value='true' ng-click='setToday($event)' /><span>Today</span></label><label><input type='radio' ng-model='todayTomorrow.isToday' ng-value='false' ng-click='setTomorrow($event)' /><span>Tomorrow</span></label></form></div><div class='quickdate-popup-footer'>\n      <div class='quickdate-text-inputs'>\n      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n        <label>Time</label>\n        <input class='quickdate-time-input' ng-class=\"{'ng-invalid': inputTimeErr}\" name='inputTime' type='text' ng-model='inputTime' placeholder='{{ timePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onTimeInputTab()'>\n      </div>\n    </div>\n    <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>\n    </div>\n  </div><div class='dateOverlay' ng-click='toggleCalendar()'></div></div>\n</div>"}}]),e.directive("ngEnter",function(){return function(e,t,n){return t.bind("keydown keypress",function(t){return 13===t.which?(e.$apply(n.ngEnter),t.preventDefault()):void 0})}}),e.directive("onTab",function(){return{restrict:"A",link:function(e,t,n){return t.bind("keydown keypress",function(t){return 9!==t.which||t.shiftKey?void 0:e.$apply(n.onTab)})}}})}).call(this);