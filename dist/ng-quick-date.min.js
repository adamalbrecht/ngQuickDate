(function(){var a;a=angular.module("ngQuickDate",[]),a.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"X",nextLinkHtml:"Next",prevLinkHtml:"Prev",disableTimepicker:!1,disableClearButton:!1,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],parseDateFunction:function(a){var b;return b=Date.parse(a),isNaN(b)?null:new Date(b)}},$get:function(){return this.options},set:function(a,b){var c,d,e;if("object"==typeof a){e=[];for(c in a)d=a[c],e.push(this.options[c]=d);return e}return this.options[a]=b}}}),a.directive("datepicker",["ngQuickDateDefaults","$filter","$sce",function(a,b,c){return{restrict:"E",require:"ngModel",scope:{ngModel:"=",onChange:"&"},replace:!0,link:function(d,e,f){var g,h,i,j,k,l,m,n,o,p,q;return j=f.debug&&f.debug.length,l=function(){return d.toggleCalendar(!1),d.weeks=[],d.inputDate=null,"string"==typeof d.ngModel&&(d.ngModel=m(d.ngModel)),"string"==typeof f.initValue&&(d.ngModel=m(f.initValue)),p(),q(),n()},p=function(){var b,e;for(b in a)e=a[b],d[b]=b.match(/[Hh]tml/)?c.trustAsHtml(a[b]||""):f[b]?f[b]:a[b];return d.labelFormat||(d.labelFormat=d.dateFormat,d.disableTimepicker||(d.labelFormat+=" "+d.timeFormat)),f.iconClass&&f.iconClass.length?d.buttonIconHtml=c.trustAsHtml("<i ng-show='iconClass' class='"+f.iconClass+"'></i>"):void 0},h=!1,window.document.addEventListener("click",function(){return h||(d.toggleCalendar(!1),d.$apply()),h=!1}),angular.element(e[0])[0].addEventListener("click",function(){return h=!0}),q=function(){return d.ngModel?(d.inputDate=b("date")(d.ngModel,a.dateFormat),d.inputTime=b("date")(d.ngModel,a.timeFormat)):(d.inputDate=null,d.inputTime=null)},n=function(){var a;return a=d.ngModel?new Date(d.ngModel):new Date,"Invalid Date"===a.toString()&&(a=new Date),a.setDate(1),d.calendarDate=new Date(a)},o=function(){var a,b,c,e,f,g,h,j,l,m,n,o,p;for(g=d.calendarDate.getDay(),e=k(d.calendarDate.getFullYear(),d.calendarDate.getMonth()),f=Math.ceil((g+e)/7),m=[],a=new Date(d.calendarDate),a.setDate(a.getDate()+-1*g),h=n=0,p=f-1;p>=0?p>=n:n>=p;h=p>=0?++n:--n)for(m.push([]),c=o=0;6>=o;c=++o)b=new Date(a),j=d.ngModel&&b&&i(b,d.ngModel),l=i(b,new Date),m[h].push({date:b,selected:j,other:b.getMonth()!==d.calendarDate.getMonth(),today:l}),a.setDate(a.getDate()+1);return d.weeks=m},g=function(a,c){return b("date")(a,c)},m=a.parseDateFunction,i=function(a,b,c){return null==c&&(c=!1),c?a-b===0:a&&b&&a.getYear()===b.getYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},k=function(a,b){return[31,a%4===0&&a%100!==0||a%400===0?29:28,31,30,31,30,31,31,30,31,30,31][b]},d.$watch("ngModel",function(a,b){return a!==b?(q(),n()):void 0}),d.$watch("calendarDate",function(a,b){return a!==b?o():void 0}),d.$watch("calendarShown",function(){var a;return a=angular.element(e[0].querySelector(".quickdate-date-input"))[0],a.select()}),d.mainButtonStr=function(){return d.ngModel?b("date")(d.ngModel,d.labelFormat):d.placeholder},d.toggleCalendar=function(a){return d.calendarShown=isFinite(a)?a:!d.calendarShown},d.setDate=function(a,b){var c;return null==b&&(b=!0),c=!d.ngModel&&a||d.ngModel&&!a||a.getTime()!==d.ngModel.getTime(),d.ngModel=a,b&&d.toggleCalendar(!1),c&&d.onChange?d.onChange():void 0},d.setDateFromInput=function(a){var b,c,e,f;null==a&&(a=!1);try{if(c=m(d.inputDate),!c)throw"Invalid Date";if(!d.disableTimepicker&&d.inputTime&&d.inputTime.length&&c){if(f=d.disableTimepicker?"00:00:00":d.inputTime,e=m(""+d.inputDate+" "+f),!e)throw"Invalid Time";d.setDate(e,!1)}else d.setDate(c,!1);return a&&d.toggleCalendar(!1),d.inputDateErr=!1,d.inputTimeErr=!1}catch(g){if(b=g,"Invalid Date"===b)return d.inputDateErr=!0;if("Invalid Time"===b)return d.inputTimeErr=!0}},d.onDateInputTab=function(){return d.disableTimepicker&&d.toggleCalendar(!1),!0},d.onTimeInputTab=function(){return d.toggleCalendar(!1),!0},d.nextMonth=function(){return d.calendarDate=new Date(new Date(d.calendarDate).setMonth(d.calendarDate.getMonth()+1))},d.prevMonth=function(){return d.calendarDate=new Date(new Date(d.calendarDate).setMonth(d.calendarDate.getMonth()-1))},d.clear=function(){return d.ngModel=null,d.toggleCalendar(!1)},l(),o(),j?console.log("quick date scope:",d):void 0},template:"<div class='quickdate'>\n  <a href='' ng-focus='toggleCalendar(true)' ng-click='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html='buttonIconHtml'></div>{{mainButtonStr()}}</a>\n  <div class='quickdate-popup' ng-class='{open: calendarShown}'>\n    <a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'><div ng-bind-html='closeButtonHtml'></div></a>\n    <div class='quickdate-text-inputs'>\n      <div class='quickdate-input-wrapper'>\n        <label>Date</label>\n        <input class='quickdate-date-input' name='inputDate' type='text' ng-model='inputDate' placeholder='1/1/2013' ng-blur=\"setDateFromInput()\" ng-enter=\"setDateFromInput(true)\" ng-class=\"{'ng-quick-date-error': inputDateErr}\"  ng-tab='onDateInputTab()' />\n      </div>\n      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n        <label>Time</label>\n        <input class='quickdate-time-input' name='inputTime' type='text' ng-model='inputTime' placeholder='12:00 PM' ng-blur=\"setDateFromInput(false)\" ng-enter=\"setDateFromInput(true)\" ng-class=\"{'quickdate-error': inputTimeErr}\" ng-tab='onTimeInputTab()'>\n      </div>\n    </div>\n    <div class='quickdate-calendar-header'>\n      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'><div ng-bind-html='prevLinkHtml'></div></a>\n      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>\n      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div ng-bind-html='nextLinkHtml'></div></a>\n    </div>\n    <table class='quickdate-calendar'>\n      <thead>\n        <tr>\n          <th ng-repeat='day in dayAbbreviations'>{{day}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat='week in weeks'>\n          <td ng-mousedown='setDate(day.date)' ng-class='{\"other-month\": day.other, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class='quickdate-popup-footer'>\n      <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>\n    </div>\n  </div>\n</div>"}}]),a.directive("ngEnter",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return 13===b.which?(a.$apply(c.ngEnter),b.preventDefault()):void 0})}}),a.directive("ngTab",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return 9===b.which?a.$apply(c.ngTab):void 0})}})}).call(this);